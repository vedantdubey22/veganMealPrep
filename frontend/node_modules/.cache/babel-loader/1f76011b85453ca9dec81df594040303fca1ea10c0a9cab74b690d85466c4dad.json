{"ast":null,"code":"import _objectSpread from\"C:/Users/dubey/OneDrive/Desktop/vegan meal prep/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState}from'react';import{searchFood,getNutritionInfo}from'../utils/api';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const FoodSearch=()=>{const[query,setQuery]=useState('');const[searchResults,setSearchResults]=useState([]);const[selectedFood,setSelectedFood]=useState(null);const[loading,setLoading]=useState(false);const[error,setError]=useState(null);const handleSearch=async e=>{e.preventDefault();if(!query.trim()){setError('Please enter a search term');return;}setLoading(true);setError(null);setSelectedFood(null);try{const results=await searchFood(query);console.log('Search results:',results);if(Array.isArray(results)&&results.length>0){setSearchResults(results);}else{setError('No results found');setSearchResults([]);}}catch(err){console.error('Search error:',err);setError(err.message||'Failed to fetch search results');setSearchResults([]);}finally{setLoading(false);}};const handleFoodSelect=async food=>{try{setLoading(true);setError(null);console.log('Getting nutrition for food:',food);const nutritionData=await getNutritionInfo(food.id);console.log('Nutrition data received:',nutritionData);setSelectedFood(_objectSpread(_objectSpread({},food),{},{nutrition:nutritionData}));}catch(err){console.error('Error fetching nutrition:',err);setError('Failed to fetch nutrition information');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto p-4\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-3xl font-bold mb-6\",children:\"Food Search\"}),/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSearch,className:\"mb-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex gap-2\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:query,onChange:e=>setQuery(e.target.value),placeholder:\"Search for food...\",className:\"flex-1 p-2 border rounded\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",disabled:loading,className:\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-green-300\",children:loading?'Searching...':'Search'})]})}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 mb-4 text-red-700 bg-red-100 rounded\",children:error}),searchResults.length>0&&!selectedFood&&/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:searchResults.map(food=>/*#__PURE__*/_jsx(\"div\",{className:\"p-4 border rounded hover:bg-gray-50 cursor-pointer\",onClick:()=>handleFoodSelect(food),children:/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold\",children:food.name})},food.id))}),selectedFood&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-gray-50 p-4 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between mb-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-xl font-semibold\",children:selectedFood.name}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setSelectedFood(null),className:\"text-sm text-gray-500 hover:text-gray-700\",children:\"Back to results\"})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4\",children:\"Loading nutrition data...\"}):selectedFood.nutrition?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-3 gap-4 text-center\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-100 p-3 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-lg\",children:[selectedFood.nutrition.protein||'0',\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Protein\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-100 p-3 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-lg\",children:[selectedFood.nutrition.fat||'0',\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Fat\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-green-100 p-3 rounded\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"font-bold text-lg\",children:[selectedFood.nutrition.carbs||'0',\"g\"]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-sm\",children:\"Carbs\"})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-4 text-center text-sm text-gray-500\",children:\"Nutrition values per 100g serving\"})]}):/*#__PURE__*/_jsx(\"div\",{className:\"text-center py-4 text-red-600\",children:\"Failed to load nutrition data\"})]})]});};export default FoodSearch;","map":{"version":3,"names":["React","useState","searchFood","getNutritionInfo","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","FoodSearch","query","setQuery","searchResults","setSearchResults","selectedFood","setSelectedFood","loading","setLoading","error","setError","handleSearch","e","preventDefault","trim","results","console","log","Array","isArray","length","err","message","handleFoodSelect","food","nutritionData","id","_objectSpread","nutrition","className","children","onSubmit","type","value","onChange","target","placeholder","disabled","map","onClick","name","protein","fat","carbs"],"sources":["C:/Users/dubey/OneDrive/Desktop/vegan meal prep/frontend/src/components/FoodSearch.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { searchFood, getNutritionInfo } from '../utils/api';\r\n\r\nconst FoodSearch = () => {\r\n    const [query, setQuery] = useState('');\r\n    const [searchResults, setSearchResults] = useState([]);\r\n    const [selectedFood, setSelectedFood] = useState(null);\r\n    const [loading, setLoading] = useState(false);\r\n    const [error, setError] = useState(null);\r\n\r\n    const handleSearch = async (e) => {\r\n        e.preventDefault();\r\n        if (!query.trim()) {\r\n            setError('Please enter a search term');\r\n            return;\r\n        }\r\n\r\n        setLoading(true);\r\n        setError(null);\r\n        setSelectedFood(null);\r\n        \r\n        try {\r\n            const results = await searchFood(query);\r\n            console.log('Search results:', results);\r\n            \r\n            if (Array.isArray(results) && results.length > 0) {\r\n                setSearchResults(results);\r\n            } else {\r\n                setError('No results found');\r\n                setSearchResults([]);\r\n            }\r\n        } catch (err) {\r\n            console.error('Search error:', err);\r\n            setError(err.message || 'Failed to fetch search results');\r\n            setSearchResults([]);\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const handleFoodSelect = async (food) => {\r\n        try {\r\n            setLoading(true);\r\n            setError(null);\r\n            console.log('Getting nutrition for food:', food);\r\n            const nutritionData = await getNutritionInfo(food.id);\r\n            console.log('Nutrition data received:', nutritionData);\r\n            setSelectedFood({\r\n                ...food,\r\n                nutrition: nutritionData\r\n            });\r\n        } catch (err) {\r\n            console.error('Error fetching nutrition:', err);\r\n            setError('Failed to fetch nutrition information');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"max-w-2xl mx-auto p-4\">\r\n            <h1 className=\"text-3xl font-bold mb-6\">Food Search</h1>\r\n            \r\n            <form onSubmit={handleSearch} className=\"mb-6\">\r\n                <div className=\"flex gap-2\">\r\n                    <input\r\n                        type=\"text\"\r\n                        value={query}\r\n                        onChange={(e) => setQuery(e.target.value)}\r\n                        placeholder=\"Search for food...\"\r\n                        className=\"flex-1 p-2 border rounded\"\r\n                    />\r\n                    <button \r\n                        type=\"submit\"\r\n                        disabled={loading}\r\n                        className=\"px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 disabled:bg-green-300\"\r\n                    >\r\n                        {loading ? 'Searching...' : 'Search'}\r\n                    </button>\r\n                </div>\r\n            </form>\r\n\r\n            {error && (\r\n                <div className=\"p-4 mb-4 text-red-700 bg-red-100 rounded\">\r\n                    {error}\r\n                </div>\r\n            )}\r\n\r\n            {searchResults.length > 0 && !selectedFood && (\r\n                <div className=\"space-y-4\">\r\n                    {searchResults.map((food) => (\r\n                        <div \r\n                            key={food.id}\r\n                            className=\"p-4 border rounded hover:bg-gray-50 cursor-pointer\"\r\n                            onClick={() => handleFoodSelect(food)}\r\n                        >\r\n                            <h3 className=\"font-semibold\">{food.name}</h3>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            )}\r\n\r\n            {selectedFood && (\r\n                <div className=\"bg-gray-50 p-4 rounded\">\r\n                    <div className=\"flex items-center justify-between mb-4\">\r\n                        <h2 className=\"text-xl font-semibold\">{selectedFood.name}</h2>\r\n                        <button \r\n                            onClick={() => setSelectedFood(null)}\r\n                            className=\"text-sm text-gray-500 hover:text-gray-700\"\r\n                        >\r\n                            Back to results\r\n                        </button>\r\n                    </div>\r\n                    {loading ? (\r\n                        <div className=\"text-center py-4\">Loading nutrition data...</div>\r\n                    ) : selectedFood.nutrition ? (\r\n                        <>\r\n                            <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n                                <div className=\"bg-blue-100 p-3 rounded\">\r\n                                    <div className=\"font-bold text-lg\">\r\n                                        {selectedFood.nutrition.protein || '0'}g\r\n                                    </div>\r\n                                    <div className=\"text-sm\">Protein</div>\r\n                                </div>\r\n                                <div className=\"bg-yellow-100 p-3 rounded\">\r\n                                    <div className=\"font-bold text-lg\">\r\n                                        {selectedFood.nutrition.fat || '0'}g\r\n                                    </div>\r\n                                    <div className=\"text-sm\">Fat</div>\r\n                                </div>\r\n                                <div className=\"bg-green-100 p-3 rounded\">\r\n                                    <div className=\"font-bold text-lg\">\r\n                                        {selectedFood.nutrition.carbs || '0'}g\r\n                                    </div>\r\n                                    <div className=\"text-sm\">Carbs</div>\r\n                                </div>\r\n                            </div>\r\n                            <div className=\"mt-4 text-center text-sm text-gray-500\">\r\n                                Nutrition values per 100g serving\r\n                            </div>\r\n                        </>\r\n                    ) : (\r\n                        <div className=\"text-center py-4 text-red-600\">\r\n                            Failed to load nutrition data\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default FoodSearch; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}